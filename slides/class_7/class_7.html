<!DOCTYPE html>
<html lang="es"><head>
<script src="class_7_files/libs/clipboard/clipboard.min.js"></script>
<script src="class_7_files/libs/quarto-html/tabby.min.js"></script>
<script src="class_7_files/libs/quarto-html/popper.min.js"></script>
<script src="class_7_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="class_7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="class_7_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="class_7_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="class_7_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <meta name="author" content=" Cristián Ayala  Director DESUC">
  <title>quarto-inputb9d438d7</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="class_7_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="class_7_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="class_7_files/libs/revealjs/dist/theme/quarto.css">
  <link href="class_7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="class_7_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="class_7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="class_7_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><div class="line-block">Clase 7: Uso de googlesheets4</div></h1>
  <p class="subtitle">Web scraping y acceso a datos desde la web</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<br>Cristián Ayala<br> Director DESUC 
</div>
</div>
</div>

  <p class="date">18 de junio de 2024</p>
</section>
<section id="presentación-de-proyectos-finales" class="slide level2">
<h2>Presentación de proyectos finales</h2>
<p>Cada cual deberá presentar:</p>
<ul>
<li><p>Nombre de su proyecto</p></li>
<li><p>Pregunta de investigación que motiva la elección</p></li>
<li><p>Sitio web desde donde obtendrá la data. <br> (Pegar URL en el chat del curso para acceder a él)</p></li>
</ul>
</section>
<section id="motivación" class="slide level2">
<h2>Motivación</h2>
<ul>
<li><p>Disponer de lugares desde donde se puedan leer y guardar datos durante su recolección, análisis y difusión.</p></li>
<li><p>Disminuir la cantidad de pasos manuales que puedan provocar errores en la transferencia de información.</p></li>
<li><p>Ejemplo: Leer una planilla para procesar datos de una encuesta y guardar una tabla de frecuencia en una planilla nueva.</p></li>
</ul>
</section>
<section id="paquetes-para-la-clase-de-hoy" class="slide level2">
<h2>Paquetes para la clase de hoy</h2>
<p>Grupo de paquetes interrelacionados:</p>
<ul>
<li><p><a href="https://googledrive.tidyverse.org">googledrive</a> : interacción con archivos completos en Google Drive.</p></li>
<li><p><a href="https://googlesheets4.tidyverse.org">googlesheets4</a>: interacción con planillas en Google Sheet.</p></li>
</ul>
<p>Mención para:</p>
<ul>
<li><a href="https://gargle.r-lib.org">gargle</a>: Maneja —tras bambalinas— la autentificación con Google para usar sus APIs.</li>
</ul>
</section>
<section id="autentificación" class="slide level2 smaller">
<h2>Autentificación</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Manejo de <a href="https://cran.r-project.org/web/packages/httr/vignettes/secrets.html">secretos</a>: administración de claves y tokens de acceso.</p></li>
<li><p>Necesitamos guardar un token para acceder a la API de Google Sheets:</p></li>
</ul>
<blockquote>
<p>Every request your application sends to the Google Sheets API needs to <a href="https://developers.google.com/sheets/api/guides/authorizing">identify your application to Google</a>. There are two ways to identify your application: using an OAuth 2.0 token (which also authorizes the request) and/or using the application’s API key.</p>
</blockquote>
<ul>
<li><p><code>gargle</code> tiene eso cubierto. Para registrarse:</p></li>
<li><p>Credenciales quedan guardadas en <code>~/Library/Caches/gargle</code> (para macOS).</p></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li>Lista de tokens que tengo almacenado:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>gargle<span class="sc">::</span><span class="fu">gargle_oauth_sitrep</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Reporting the default cache location.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>9 tokens found in this gargle OAuth cache:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>'~/Library/Caches/gargle'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>email             client         scopes          hash...   
_________________ ______________ _______________ __________
caayala@uc.cl     tidyverse-clio ...drive        134f22a...
caayala@uc.cl     tidyverse-clio ...drive        20061ab...
caayala@uc.cl     tidyverse-clio ...spreadsheets 7a6077d...
caayala@uc.cl     tidyverse-clio ...spreadsheets 9566fe0...
desuc@fge.ong     tidyverse-clio ...spreadsheets 9566fe0...
caayala@gmail.com tidyverse-clio ...drive        c13dc35...
caayala@uc.cl     tidyverse-clio ...spreadsheets d67d4ef...
caayala@gmail.com gargle-clio                    fc586e9...
caayala@uc.cl     gargle-clio                    fc586e9...</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="google-sheets-estructura-de-links" class="slide level2 smaller">
<h2>Google Sheets: estructura de links</h2>
<p>El link a una planilla en Google Sheets tiene la siguiente forma:</p>
<p><code>https://docs.google.com/spreadsheets/d/PLANILLA_ID/edit#gid=HOJA_ID</code></p>
<p>En nuestro ejemplo:</p>
<ul>
<li>PLANILLA_ID: <code>ss</code> (spreadsheet_id) <code>1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ</code></li>
<li>HOJA_ID: (sheet_id) <code>398551276</code></li>
</ul>
<div class="smaller">
<p>Hoja <em>Web Scraping - Bicentenario UC</em> queda así:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>httr2<span class="sc">::</span><span class="fu">url_parse</span>(<span class="st">'https://docs.google.com/spreadsheets/d/1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ/edit#gid=398551276'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href=""></a>  <span class="fu">discard</span>(is.null)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$scheme
[1] "https"

$hostname
[1] "docs.google.com"

$path
[1] "/spreadsheets/d/1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ/edit"

$fragment
[1] "gid=398551276"</code></pre>
</div>
</div>
</div>
</section>
<section id="google-drive-búsqueda-de-archivo-1" class="slide level2">
<h2>Google Drive: búsqueda de archivo 1</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ">Planilla</a> la respuesta a tres preguntas de Bicentenario 2020.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">library</span>(googledrive)</span>
<span id="cb9-2"><a href=""></a><span class="co"># Elección de cuenta si es que se tienen varias</span></span>
<span id="cb9-3"><a href=""></a><span class="fu">options</span>(<span class="at">gargle_oauth_email =</span> <span class="st">"caayala@uc.cl"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Para encontrar indicadores de un archivo en Google Drive, <code>googledrive</code> provee funciones para su búsqueda:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="co"># Solo spreadsheet</span></span>
<span id="cb10-2"><a href=""></a><span class="co"># Al acceder al servicio por primera vez, debiese preguntar por las credenciales.</span></span>
<span id="cb10-3"><a href=""></a>(ss_b <span class="ot">&lt;-</span> googledrive<span class="sc">::</span><span class="fu">drive_find</span>(<span class="st">'Web Scraping'</span>, </span>
<span id="cb10-4"><a href=""></a>                                 <span class="at">type =</span> <span class="st">'spreadsheet'</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A dribble: 1 × 3
  name                           id       drive_resource   
  &lt;chr&gt;                          &lt;drv_id&gt; &lt;list&gt;           
1 Web Scraping - Bicentenario UC 1rujigr… &lt;named list [36]&gt;</code></pre>
</div>
</div>
</section>
<section id="google-drive-búsqueda-de-archivo-2" class="slide level2 smaller">
<h2>Google Drive: búsqueda de archivo 2</h2>
<p>El indicador del archivo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>ss_b<span class="sc">$</span>drive_resource <span class="sc">|&gt;</span> <span class="fu">str</span>(<span class="dv">1</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 1
 $ :List of 36</code></pre>
</div>
</div>
<p>Contiene mucha otra información:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a>ss_b<span class="sc">$</span>drive_resource[[<span class="dv">1</span>]] <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "kind"                         "copyRequiresWriterPermission"
 [3] "writersCanShare"              "viewedByMe"                  
 [5] "mimeType"                     "exportLinks"                 
 [7] "parents"                      "thumbnailLink"               
 [9] "iconLink"                     "shared"                      
[11] "lastModifyingUser"            "owners"                      
[13] "webViewLink"                  "size"                        
[15] "viewersCanCopyContent"        "permissions"                 
[17] "hasThumbnail"                 "spaces"                      
[19] "id"                           "name"                        
[21] "starred"                      "trashed"                     
[23] "explicitlyTrashed"            "createdTime"                 
[25] "modifiedTime"                 "modifiedByMeTime"            
[27] "viewedByMeTime"               "quotaBytesUsed"              
[29] "version"                      "ownedByMe"                   
[31] "isAppAuthorized"              "capabilities"                
[33] "thumbnailVersion"             "modifiedByMe"                
[35] "permissionIds"                "linkShareMetadata"           </code></pre>
</div>
</div>
</section>
<section id="google-drive-búsqueda-de-archivo-3" class="slide level2">
<h2>Google Drive: búsqueda de archivo 3</h2>
<p>También se pueden buscar entre otros tipos de archivos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="co"># Solo archivos pdf</span></span>
<span id="cb16-2"><a href=""></a>googledrive<span class="sc">::</span><span class="fu">drive_find</span>(<span class="st">'Cuestionario Bicentenario'</span>, <span class="at">type =</span> <span class="st">'pdf'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A dribble: 1 × 3
  name                               id       drive_resource   
  &lt;chr&gt;                              &lt;drv_id&gt; &lt;list&gt;           
1 Cuestionario Bicentenario 2020.pdf 1vBW3nf… &lt;named list [42]&gt;</code></pre>
</div>
</div>
<p>O buscar entre todo:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># Todo tipo de archivos. Toma su tiempo</span></span>
<span id="cb18-2"><a href=""></a>googledrive<span class="sc">::</span><span class="fu">drive_find</span>(<span class="st">'Web Scraping'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="google-sheets-autentificación-y-lectura-1" class="slide level2 smaller">
<h2>Google Sheets: autentificación y lectura 1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="fu">library</span>(googlesheets4)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Se puede individualizar un archivo mediante su <code>dribble</code>, a partir</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="fu">class</span>(ss_b)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dribble"    "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># Al acceder al servicio por primera vez, debiese preguntar por las credenciales.</span></span>
<span id="cb22-2"><a href=""></a>df_1 <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="at">ss =</span> ss_b,</span>
<span id="cb22-3"><a href=""></a>                   <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>)</span>
<span id="cb22-4"><a href=""></a><span class="fu">head</span>(df_1)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  `Folio encuesta` `Registrar Sexo` edad_cat 1 - (Eliminar la pobreza) Para co…¹
             &lt;dbl&gt;            &lt;dbl&gt;    &lt;dbl&gt;                               &lt;dbl&gt;
1           100101                2        2                                   4
2           100102                2        3                                   3
3           100103                1        4                                   3
4           100104                2        5                                   3
5           100105                2        2                                   3
6           100106                2        3                                   3
# ℹ abbreviated name:
#   ¹​`1 - (Eliminar la pobreza) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o se habr`
# ℹ 2 more variables:
#   `2 - (Ser un país desarrollado) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o s` &lt;dbl&gt;,
#   `3 - (Detener el daño al medio ambiente) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="google-sheets-autentificación-y-lectura-2" class="slide level2 smaller">
<h2>Google Sheets: autentificación y lectura 2</h2>
<p>Acceso con la url completa:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>url_sheet <span class="ot">&lt;-</span> <span class="st">'https://docs.google.com/spreadsheets/d/1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ/'</span></span>
<span id="cb24-2"><a href=""></a></span>
<span id="cb24-3"><a href=""></a>df_2 <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="at">ss =</span> url_sheet,</span>
<span id="cb24-4"><a href=""></a>                   <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="smaller">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="fu">head</span>(df_2)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  `Folio encuesta` `Registrar Sexo` edad_cat 1 - (Eliminar la pobreza) Para co…¹
             &lt;dbl&gt;            &lt;dbl&gt;    &lt;dbl&gt;                               &lt;dbl&gt;
1           100101                2        2                                   4
2           100102                2        3                                   3
3           100103                1        4                                   3
4           100104                2        5                                   3
5           100105                2        2                                   3
6           100106                2        3                                   3
# ℹ abbreviated name:
#   ¹​`1 - (Eliminar la pobreza) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o se habr`
# ℹ 2 more variables:
#   `2 - (Ser un país desarrollado) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o s` &lt;dbl&gt;,
#   `3 - (Detener el daño al medio ambiente) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que` &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="google-sheets-autentificación-y-lectura-3" class="slide level2 smaller">
<h2>Google Sheets: autentificación y lectura 3</h2>
<p>Acceso sabiendo el id de la planilla:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>ss <span class="ot">&lt;-</span> <span class="st">'1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ'</span></span>
<span id="cb27-2"><a href=""></a></span>
<span id="cb27-3"><a href=""></a>df_3 <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="at">ss =</span> ss,</span>
<span id="cb27-4"><a href=""></a>                   <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="smaller">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="fu">head</span>(df_3)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  `Folio encuesta` `Registrar Sexo` edad_cat 1 - (Eliminar la pobreza) Para co…¹
             &lt;dbl&gt;            &lt;dbl&gt;    &lt;dbl&gt;                               &lt;dbl&gt;
1           100101                2        2                                   4
2           100102                2        3                                   3
3           100103                1        4                                   3
4           100104                2        5                                   3
5           100105                2        2                                   3
6           100106                2        3                                   3
# ℹ abbreviated name:
#   ¹​`1 - (Eliminar la pobreza) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o se habr`
# ℹ 2 more variables:
#   `2 - (Ser un país desarrollado) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que ahora o s` &lt;dbl&gt;,
#   `3 - (Detener el daño al medio ambiente) Para comenzar, le voy a enumerar una serie de metas que Chile se ha propuesto para el futuro. Pensando en un plazo de 10 años, ¿Ud. cree que se habrán alcanzado estas metas, se habrá avanzado, se seguirá igual que` &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="google-sheets-características-de-la-planilla-1" class="slide level2 smaller">
<h2>Google Sheets: Características de la planilla 1</h2>
<p>Datos del archivo mediante su <code>ss_id</code> o <code>dribble</code> (ss_b):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="fu">gs4_get</span>(ss)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
── &lt;googlesheets4_spreadsheet&gt; ─────────────────────────────────────────────────
Spreadsheet name: "Web Scraping - Bicentenario UC"            
              ID: 1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ
          Locale: en_US                                       
       Time zone: America/Los_Angeles                         
     # of sheets: 5                                           

── &lt;sheets&gt; ────────────────────────────────────────────────────────────────────
           (Sheet name): (Nominal extent in rows x columns)
            'variables': 1000 x 26
              'niveles': 12 x 3
'bicentenario_2020.csv': 2048 x 6
               'imagen': 1000 x 26
           'resultados': 6 x 8</code></pre>
</div>
</div>
</section>
<section id="google-sheets-características-de-la-planilla-2" class="slide level2 smaller">
<h2>Google Sheets: Características de la planilla 2</h2>
<p>Datos de las hojas del archivo: Útil para tener el <code>HOJA_ID</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="fu">sheet_properties</span>(ss)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  name                  index     id type  visible grid_rows grid_columns data  
  &lt;chr&gt;                 &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;lgl&gt;       &lt;int&gt;        &lt;int&gt; &lt;list&gt;
1 variables                 0 1.72e9 GRID  TRUE         1000           26 &lt;NULL&gt;
2 niveles                   1 8.00e8 GRID  TRUE           12            3 &lt;NULL&gt;
3 bicentenario_2020.csv     2 3.99e8 GRID  TRUE         2048            6 &lt;NULL&gt;
4 imagen                    3 1.39e9 GRID  TRUE         1000           26 &lt;NULL&gt;
5 resultados                4 1.57e9 GRID  TRUE            6            8 &lt;NULL&gt;</code></pre>
</div>
</div>
</section>
<section id="lectura-de-hojas-1" class="slide level2">
<h2>Lectura de hojas 1</h2>
<p><code>read_sheet</code> entrega una <code>tibble</code>. Se debe indicar una hoja.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a>df_base <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(ss, <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>)</span>
<span id="cb34-2"><a href=""></a>df_niv  <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(ss, <span class="at">sheet =</span> <span class="st">'niveles'</span>)</span>
<span id="cb34-3"><a href=""></a>df_var  <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(ss, <span class="at">sheet =</span> <span class="st">'variables'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lectura como list–column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="fu">head</span>(df_var, <span class="dv">4</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  variables tipo  bicentenario_2020.csv
  &lt;chr&gt;     &lt;chr&gt; &lt;list&gt;               
1 encuesta  &lt;NA&gt;  &lt;chr [1]&gt;            
2 sheet     &lt;NA&gt;  &lt;chr [1]&gt;            
3 casos     &lt;NA&gt;  &lt;dbl [1]&gt;            
4 variables &lt;NA&gt;  &lt;dbl [1]&gt;            </code></pre>
</div>
</div>
</section>
<section id="lectura-de-hojas-2" class="slide level2">
<h2>Lectura de hojas 2</h2>
<p>Control del tipo de variable de cada columna con atributo <code>col_types</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>df_var  <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(ss, <span class="at">sheet =</span> <span class="st">'variables'</span>,</span>
<span id="cb37-2"><a href=""></a>                      <span class="at">col_types =</span> <span class="st">'c'</span>) <span class="co"># tipo de variable se recicla.</span></span>
<span id="cb37-3"><a href=""></a></span>
<span id="cb37-4"><a href=""></a><span class="fu">head</span>(df_var, <span class="dv">4</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  variables tipo  bicentenario_2020.csv
  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                
1 encuesta  &lt;NA&gt;  Bicentenario 2020    
2 sheet     &lt;NA&gt;  bicentenario_2020.csv
3 casos     &lt;NA&gt;  2047                 
4 variables &lt;NA&gt;  15                   </code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-por-celda-1" class="slide level2 smaller">
<h2>Lectura de información por celda 1</h2>
<p><code>range_read_cells</code> permite leer información en cada celda:</p>
<ul>
<li>valores: <code>cell_data = c("default")</code></li>
<li>valores y formato: <code>cell_data = c("full")</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>df_cels <span class="ot">&lt;-</span> <span class="fu">range_read_cells</span>(ss, <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>, </span>
<span id="cb39-2"><a href=""></a>                            <span class="at">cell_data =</span> <span class="st">'default'</span>)</span>
<span id="cb39-3"><a href=""></a></span>
<span id="cb39-4"><a href=""></a><span class="fu">head</span>(df_cels, <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
    row   col loc   cell      
  &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;    
1     1     1 A1    &lt;CELL_TEX&gt;
2     1     2 B1    &lt;CELL_TEX&gt;
3     1     3 C1    &lt;CELL_TEX&gt;</code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-por-celda-2" class="slide level2">
<h2>Lectura de información por celda 2</h2>
<p>Información de valores por celda:</p>
<div class="smaller">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>df_cels[<span class="dv">1</span>, ] <span class="sc">|&gt;</span> <span class="fu">str</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1 × 4] (S3: tbl_df/tbl/data.frame)
 $ row : int 1
 $ col : int 1
 $ loc : chr "A1"
 $ cell:List of 1
  ..$ :List of 2
  .. ..$ effectiveValue:List of 1
  .. .. ..$ stringValue: chr "Folio encuesta"
  .. ..$ formattedValue: chr "Folio encuesta"
  .. ..- attr(*, "class")= chr [1:2] "CELL_TEXT" "SHEETS_CELL"</code></pre>
</div>
</div>
</div>
</section>
<section id="lectura-de-información-por-celda-3" class="slide level2">
<h2>Lectura de información por celda 3</h2>
<p>Información de la primera celda</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>df_cels<span class="sc">$</span>cell[[<span class="dv">1</span>]]</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$effectiveValue
$effectiveValue$stringValue
[1] "Folio encuesta"


$formattedValue
[1] "Folio encuesta"

attr(,"class")
[1] "CELL_TEXT"   "SHEETS_CELL"</code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-por-celda-4" class="slide level2 smaller">
<h2>Lectura de información por celda 4</h2>
<p>Extraer el dato de valor formateado <code>formattedValue</code> para cada celdilla.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a>df_cels <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href=""></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">formattedValue =</span> <span class="fu">pluck</span>(cell, <span class="st">'formattedValue'</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12,288 × 5
# Rowwise: 
     row   col loc   cell       formattedValue                                  
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;     &lt;chr&gt;                                           
 1     1     1 A1    &lt;CELL_TEX&gt; Folio encuesta                                  
 2     1     2 B1    &lt;CELL_TEX&gt; Registrar Sexo                                  
 3     1     3 C1    &lt;CELL_TEX&gt; edad_cat                                        
 4     1     4 D1    &lt;CELL_TEX&gt; 1 - (Eliminar la pobreza) Para comenzar, le voy…
 5     1     5 E1    &lt;CELL_TEX&gt; 2 - (Ser un país desarrollado) Para comenzar, l…
 6     1     6 F1    &lt;CELL_TEX&gt; 3 - (Detener el daño al medio ambiente) Para co…
 7     2     1 A2    &lt;CELL_NUM&gt; 100101                                          
 8     2     2 B2    &lt;CELL_NUM&gt; 2                                               
 9     2     3 C2    &lt;CELL_NUM&gt; 2                                               
10     2     4 D2    &lt;CELL_NUM&gt; 4                                               
# ℹ 12,278 more rows</code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-completa-1" class="slide level2">
<h2>Lectura de información completa 1</h2>
<ul>
<li>Leeremos valores y formato.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a>df_cels_full <span class="ot">&lt;-</span> <span class="fu">range_read_cells</span>(ss, <span class="at">sheet =</span> <span class="st">'bicentenario_2020.csv'</span>, </span>
<span id="cb47-2"><a href=""></a>                                 <span class="at">cell_data =</span> <span class="st">'full'</span>)</span>
<span id="cb47-3"><a href=""></a></span>
<span id="cb47-4"><a href=""></a><span class="fu">head</span>(df_cels_full)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
    row   col loc   cell      
  &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;    
1     1     1 A1    &lt;CELL_TEX&gt;
2     1     2 B1    &lt;CELL_TEX&gt;
3     1     3 C1    &lt;CELL_TEX&gt;
4     1     4 D1    &lt;CELL_TEX&gt;
5     1     5 E1    &lt;CELL_TEX&gt;
6     1     6 F1    &lt;CELL_TEX&gt;</code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-completa-2" class="slide level2">
<h2>Lectura de información completa 2</h2>
<p>Mucha mayor información sobre formato.</p>
<div class="smaller">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>df_cels_full[<span class="dv">1</span>, ]<span class="sc">$</span>cell <span class="sc">|&gt;</span> <span class="fu">str</span>(<span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 1
 $ :List of 5
  ..$ userEnteredValue :List of 1
  .. ..$ stringValue: chr "Folio encuesta"
  ..$ effectiveValue   :List of 1
  .. ..$ stringValue: chr "Folio encuesta"
  ..$ formattedValue   : chr "Folio encuesta"
  ..$ userEnteredFormat:List of 5
  .. ..$ backgroundColor     :List of 3
  .. ..$ verticalAlignment   : chr "BOTTOM"
  .. ..$ wrapStrategy        : chr "OVERFLOW_CELL"
  .. ..$ textFormat          :List of 4
  .. ..$ backgroundColorStyle:List of 1
  ..$ effectiveFormat  :List of 8
  .. ..$ backgroundColor     :List of 3
  .. ..$ padding             :List of 2
  .. ..$ horizontalAlignment : chr "LEFT"
  .. ..$ verticalAlignment   : chr "BOTTOM"
  .. ..$ wrapStrategy        : chr "OVERFLOW_CELL"
  .. ..$ textFormat          :List of 8
  .. ..$ hyperlinkDisplayType: chr "PLAIN_TEXT"
  .. ..$ backgroundColorStyle:List of 1
  ..- attr(*, "class")= chr [1:2] "CELL_TEXT" "SHEETS_CELL"</code></pre>
</div>
</div>
<p>Podemos trabajar con esta información.</p>
</div>
</section>
<section id="lectura-de-información-completa-3" class="slide level2">
<h2>Lectura de información completa 3</h2>
<p>Extracción del color de las celdas para obtener el folio de celdas con valor perdido:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>df_cels_folio_color <span class="ot">&lt;-</span> df_cels_full <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href=""></a>  <span class="fu">filter</span>(col <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  <span class="co"># Folio está en columna 1</span></span>
<span id="cb51-3"><a href=""></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">formattedValue =</span> <span class="fu">pluck</span>(cell, <span class="st">'formattedValue'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-5"><a href=""></a>           <span class="fu">str_trunc</span>(<span class="at">width =</span> <span class="dv">15</span>),</span>
<span id="cb51-6"><a href=""></a>         <span class="at">backgroundColorStyle =</span> <span class="fu">list</span>(</span>
<span id="cb51-7"><a href=""></a>           <span class="fu">pluck</span>(cell, <span class="st">'effectiveFormat'</span>, <span class="st">'backgroundColor'</span>)</span>
<span id="cb51-8"><a href=""></a>           ))</span>
<span id="cb51-9"><a href=""></a></span>
<span id="cb51-10"><a href=""></a><span class="co"># Sencillo revisar los colores como hex: </span></span>
<span id="cb51-11"><a href=""></a>df_cels_folio_color<span class="sc">$</span>hex <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(df_cels_folio_color<span class="sc">$</span>backgroundColorStyle, </span>
<span id="cb51-12"><a href=""></a>                                   <span class="sc">~</span>rlang<span class="sc">::</span><span class="fu">inject</span>(<span class="fu">rgb</span>(<span class="sc">!!!</span>.)))</span>
<span id="cb51-13"><a href=""></a></span>
<span id="cb51-14"><a href=""></a><span class="fu">table</span>(df_cels_folio_color<span class="sc">$</span>hex)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
#F4CCCC #FBBC04 #FFFFFF 
     18       1    2029 </code></pre>
</div>
</div>
</section>
<section id="lectura-de-información-completa-4" class="slide level2">
<h2>Lectura de información completa 4</h2>
<p>Folios destacados en la base original por tener color de fondo <code>#F4CCCC</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>df_cels_folio_color <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href=""></a>  <span class="fu">filter</span>(hex <span class="sc">==</span> <span class="st">'#F4CCCC'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href=""></a>  <span class="fu">pull</span>(formattedValue)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "100801" "101305" "107206" "114802" "116305" "118004" "118604" "125002"
 [9] "125406" "126403" "129401" "131604" "131705" "133402" "135906" "136203"
[17] "140601" "203302"</code></pre>
</div>
</div>
</section>
<section id="base-de-datos-variables" class="slide level2">
<h2>Base de datos: variables</h2>
<p>Nombre de variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>df_var_orden <span class="ot">&lt;-</span> df_var[<span class="fu">match</span>(<span class="fu">names</span>(df_base), df_var<span class="sc">$</span>bicentenario_2020.csv), ]</span>
<span id="cb55-2"><a href=""></a></span>
<span id="cb55-3"><a href=""></a><span class="fu">names</span>(df_base) <span class="ot">&lt;-</span> df_var_orden<span class="sc">$</span>variables</span>
<span id="cb55-4"><a href=""></a></span>
<span id="cb55-5"><a href=""></a><span class="fu">head</span>(df_base, <span class="dv">2</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
   folio  sexo tramo_edad  s1_1  s1_2  s1_3
   &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 100101     2          2     4     3     3
2 100102     2          3     3     3     3</code></pre>
</div>
</div>
<p>Etiquetas de variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a>labelled<span class="sc">::</span><span class="fu">var_label</span>(df_base) <span class="ot">&lt;-</span> df_var_orden<span class="sc">$</span>bicentenario_2020.csv</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-de-datos-valores-1" class="slide level2">
<h2>Base de datos: valores 1</h2>
<p>Etiquetas de valores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a>df_niveles <span class="ot">&lt;-</span> df_niv <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href=""></a>  tidyr<span class="sc">::</span><span class="fu">nest</span>(<span class="at">.by =</span> tipo,</span>
<span id="cb58-3"><a href=""></a>              <span class="at">.key =</span> <span class="st">'niveles'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb58-4"><a href=""></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb58-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">niveles =</span> <span class="fu">list</span>(<span class="fu">deframe</span>(<span class="fu">rev</span>(niveles))))</span>
<span id="cb58-6"><a href=""></a></span>
<span id="cb58-7"><a href=""></a>df_niveles</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
# Rowwise: 
  tipo        niveles  
  &lt;chr&gt;       &lt;list&gt;   
1 t_sexo      &lt;dbl [2]&gt;
2 t_edad      &lt;dbl [5]&gt;
3 t_alzanzado &lt;dbl [4]&gt;</code></pre>
</div>
</div>
</section>
<section id="base-de-datos-valores-2" class="slide level2">
<h2>Base de datos: valores 2</h2>
<p>Etiquetas de valores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a>df_niveles <span class="sc">|&gt;</span> <span class="fu">str</span>(<span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>rowws_df [3 × 2] (S3: rowwise_df/tbl_df/tbl/data.frame)
 $ tipo   : chr [1:3] "t_sexo" "t_edad" "t_alzanzado"
 $ niveles:List of 3
  ..$ : Named num [1:2] 1 2
  .. ..- attr(*, "names")= chr [1:2] "Hombre" "Mujer"
  ..$ : Named num [1:5] 1 2 3 4 5
  .. ..- attr(*, "names")= chr [1:5] "18-24" "25-34" "35-44" "45-54" ...
  ..$ : Named num [1:4] 1 2 3 4
  .. ..- attr(*, "names")= chr [1:4] "Se habrá retrocedido" "Se estará igual" "Se habrá avanzado" "Se habrá alcanzado"
 - attr(*, "groups")= tibble [3 × 1] (S3: tbl_df/tbl/data.frame)</code></pre>
</div>
</div>
</section>
<section id="base-de-datos-valores-3" class="slide level2">
<h2>Base de datos: valores 3</h2>
<p>Vector que relaciona variable y tipo de escalas asociadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a>v_values <span class="ot">&lt;-</span> df_var_orden <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href=""></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(tipo)) <span class="sc">|&gt;</span> </span>
<span id="cb62-3"><a href=""></a>  <span class="fu">pull</span>(tipo, variables)</span>
<span id="cb62-4"><a href=""></a></span>
<span id="cb62-5"><a href=""></a>v_values</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         sexo    tramo_edad          s1_1          s1_2          s1_3 
     "t_sexo"      "t_edad" "t_alzanzado" "t_alzanzado" "t_alzanzado" </code></pre>
</div>
</div>
<p>Se usará para agregar las etiquetas en las variables correspondientes.</p>
</section>
<section id="base-de-datos-valores-4" class="slide level2 smaller">
<h2>Base de datos: valores 4</h2>
<p>Lista de variables con sus etiquetas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a>value_list <span class="ot">&lt;-</span> <span class="fu">structure</span>(df_niveles<span class="sc">$</span>niveles[<span class="fu">match</span>(<span class="fu">as.character</span>(v_values), </span>
<span id="cb64-2"><a href=""></a>                                                 df_niveles<span class="sc">$</span>tipo)],</span>
<span id="cb64-3"><a href=""></a>                        <span class="at">names =</span> <span class="fu">names</span>(v_values))</span>
<span id="cb64-4"><a href=""></a>value_list</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$sexo
Hombre  Mujer 
     1      2 

$tramo_edad
   18-24    25-34    35-44    45-54 55 y más 
       1        2        3        4        5 

$s1_1
Se habrá retrocedido      Se estará igual    Se habrá avanzado 
                   1                    2                    3 
  Se habrá alcanzado 
                   4 

$s1_2
Se habrá retrocedido      Se estará igual    Se habrá avanzado 
                   1                    2                    3 
  Se habrá alcanzado 
                   4 

$s1_3
Se habrá retrocedido      Se estará igual    Se habrá avanzado 
                   1                    2                    3 
  Se habrá alcanzado 
                   4 </code></pre>
</div>
</div>
</section>
<section id="base-de-datos-valores-5" class="slide level2 smaller">
<h2>Base de datos: valores 5</h2>
<p>Agregar valores según vector anterior.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a>df_base <span class="ot">&lt;-</span> df_base <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href=""></a>  labelled<span class="sc">::</span><span class="fu">set_value_labels</span>(<span class="sc">!!!</span>value_list)</span>
<span id="cb66-3"><a href=""></a></span>
<span id="cb66-4"><a href=""></a>df_base <span class="sc">|&gt;</span> </span>
<span id="cb66-5"><a href=""></a>  <span class="fu">head</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
   folio sexo       tramo_edad   s1_1                   s1_2             s1_3   
   &lt;dbl&gt; &lt;dbl+lbl&gt;  &lt;dbl+lbl&gt;    &lt;dbl+lbl&gt;              &lt;dbl+lbl&gt;        &lt;dbl+l&gt;
1 100101 2 [Mujer]  2 [25-34]    4 [Se habrá alcanzado] 3 [Se habrá ava… 3 [Se …
2 100102 2 [Mujer]  3 [35-44]    3 [Se habrá avanzado]  3 [Se habrá ava… 3 [Se …
3 100103 1 [Hombre] 4 [45-54]    3 [Se habrá avanzado]  3 [Se habrá ava… 2 [Se …
4 100104 2 [Mujer]  5 [55 y más] 3 [Se habrá avanzado]  3 [Se habrá ava… 1 [Se …
5 100105 2 [Mujer]  2 [25-34]    3 [Se habrá avanzado]  2 [Se estará ig… 2 [Se …
6 100106 2 [Mujer]  3 [35-44]    3 [Se habrá avanzado]  3 [Se habrá ava… 3 [Se …</code></pre>
</div>
</div>
</section>
<section id="respuestas-tabla-de-frecuencia-1" class="slide level2 smaller">
<h2>Respuestas: tabla de frecuencia 1</h2>
<p>Construir tabla de resultados de <code>s1_1</code> según sexo y categoría de edad</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a>df_base_fct <span class="ot">&lt;-</span> df_base <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as_factor))</span>
<span id="cb68-3"><a href=""></a></span>
<span id="cb68-4"><a href=""></a>df_base_fct <span class="sc">|&gt;</span> </span>
<span id="cb68-5"><a href=""></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  folio  sexo   tramo_edad s1_1               s1_2              s1_3            
  &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;      &lt;fct&gt;              &lt;fct&gt;             &lt;fct&gt;           
1 100101 Mujer  25-34      Se habrá alcanzado Se habrá avanzado Se habrá avanza…
2 100102 Mujer  35-44      Se habrá avanzado  Se habrá avanzado Se habrá avanza…
3 100103 Hombre 45-54      Se habrá avanzado  Se habrá avanzado Se estará igual </code></pre>
</div>
</div>
</section>
<section id="respuestas-tabla-de-frecuencia-2" class="slide level2 smaller">
<h2>Respuestas: tabla de frecuencia 2</h2>
<p>Función para número de respuesta por categoría y variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a>f_tabla <span class="ot">&lt;-</span> <span class="cf">function</span>(.df, .cat, .var){</span>
<span id="cb70-2"><a href=""></a>  .df <span class="sc">|&gt;</span> </span>
<span id="cb70-3"><a href=""></a>    <span class="fu">count</span>({{ .cat }}, {{ .var }}) <span class="sc">|&gt;</span> </span>
<span id="cb70-4"><a href=""></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> {{ .cat }}, </span>
<span id="cb70-5"><a href=""></a>                <span class="at">values_from =</span> n)  </span>
<span id="cb70-6"><a href=""></a>}</span>
<span id="cb70-7"><a href=""></a></span>
<span id="cb70-8"><a href=""></a>df_tabla <span class="ot">&lt;-</span> <span class="fu">map</span>(rlang<span class="sc">::</span><span class="fu">exprs</span>(sexo, tramo_edad), </span>
<span id="cb70-9"><a href=""></a>                \(x) <span class="fu">f_tabla</span>(df_base_fct, <span class="sc">!!</span>x, s1_1))</span>
<span id="cb70-10"><a href=""></a></span>
<span id="cb70-11"><a href=""></a>df_tabla</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 5 × 3
  s1_1                 Hombre Mujer
  &lt;fct&gt;                 &lt;int&gt; &lt;int&gt;
1 Se habrá retrocedido     17    35
2 Se estará igual         195   290
3 Se habrá avanzado       430   759
4 Se habrá alcanzado      109   207
5 9                         1     4

[[2]]
# A tibble: 5 × 6
  s1_1                 `18-24` `25-34` `35-44` `45-54` `55 y más`
  &lt;fct&gt;                  &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;      &lt;int&gt;
1 Se habrá retrocedido      12       6       7      10         17
2 Se estará igual           66      92      68      82        177
3 Se habrá avanzado        148     211     193     217        420
4 Se habrá alcanzado        29      53      34      55        145
5 9                          1       1      NA      NA          3</code></pre>
</div>
</div>
</section>
<section id="respuestas-tabla-de-frecuencia-3" class="slide level2 smaller">
<h2>Respuestas: tabla de frecuencia 3</h2>
<p>Función para número de respuesta por categoría y variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>df_tabla <span class="ot">&lt;-</span> df_tabla <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href=""></a>  <span class="fu">reduce</span>(left_join, <span class="at">by =</span> <span class="st">'s1_1'</span>)</span>
<span id="cb72-3"><a href=""></a></span>
<span id="cb72-4"><a href=""></a>df_tabla</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  s1_1                 Hombre Mujer `18-24` `25-34` `35-44` `45-54` `55 y más`
  &lt;fct&gt;                 &lt;int&gt; &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;      &lt;int&gt;
1 Se habrá retrocedido     17    35      12       6       7      10         17
2 Se estará igual         195   290      66      92      68      82        177
3 Se habrá avanzado       430   759     148     211     193     217        420
4 Se habrá alcanzado      109   207      29      53      34      55        145
5 9                         1     4       1       1      NA      NA          3</code></pre>
</div>
</div>
</section>
<section id="escribir-en-google-sheets-1" class="slide level2 smaller">
<h2>Escribir en Google Sheets 1</h2>
<p>Escritura de tabla de frecuencia en nueva hoja en la <a href="https://docs.google.com/spreadsheets/d/1rujigrFqSaSLjsSvrMZY4IU3CSLiM_ymd-wtst9BYNQ">planilla</a>.</p>
<ul>
<li>Esto debiese ser posible solo para quienes tienen <em>permisos de edición</em> de la hoja.</li>
</ul>
<p>No considera el formato de la hoja de destino, mostrando una tabla:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a><span class="co"># Reemplaza formatos en la hoja de destino</span></span>
<span id="cb74-2"><a href=""></a>df_tabla <span class="sc">|&gt;</span> </span>
<span id="cb74-3"><a href=""></a>  <span class="fu">sheet_write</span>(ss,</span>
<span id="cb74-4"><a href=""></a>              <span class="at">sheet =</span> <span class="st">'resultados'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escribir-en-google-sheets-2" class="slide level2 smaller">
<h2>Escribir en Google Sheets 2</h2>
<p>Eliminar contenido en hoja <code>resultados</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href=""></a><span class="fu">range_clear</span>(ss, <span class="at">sheet =</span> <span class="st">'resultados'</span>, <span class="at">reformat =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Considerando el formato de la hoja de destino</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a><span class="co"># NO reemplaza formatos en la hoja de destino</span></span>
<span id="cb76-2"><a href=""></a><span class="fu">range_write</span>(ss,</span>
<span id="cb76-3"><a href=""></a>            df_tabla,</span>
<span id="cb76-4"><a href=""></a>            <span class="at">sheet =</span> <span class="st">'resultados'</span>,</span>
<span id="cb76-5"><a href=""></a>            <span class="at">reformat =</span> <span class="cn">FALSE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="en-el-próximo-taller" class="slide level2">
<h2>En el próximo taller…</h2>
<ul>
<li><p>Programación con dplyr.</p></li>
<li><p>Autentificación</p></li>
<li><p>de Google Drive y Google Sheets</p></li>
</ul>
</section>
<section id="section" class="slide level2 smaller">
<h2></h2>
<p>Presentación y código en GitHub:<br>
<a href="https://github.com/caayala/web_scraping_soc40XX_2024" class="uri">https://github.com/caayala/web_scraping_soc40XX_2024</a><br>
<a href="https://caayala.github.io/web_scraping_soc40XX_2024" class="uri">https://caayala.github.io/web_scraping_soc40XX_2024</a></p>
<p><br></p>
<div style="font-size:3em; text-align:center; padding: 50px;">
<p>¡Gracias!</p>
</div>
<p><br> Cristián Ayala<br>
<a href="https://blog.desuc.cl/" class="uri">https://blog.desuc.cl/</a><br>
<a href="http://github.com/caayala" class="uri">http://github.com/caayala</a></p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>DESUC Web Scraping, 2024</p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="class_7_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="class_7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="class_7_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="class_7_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copiado");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copiado");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>